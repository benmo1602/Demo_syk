(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{120:function(e,t,n){(function(s){var a,r;a=[n(13)],void 0===(r=function(e){var t=e.module("app");t.controller("personalInfoController",["$scope","$cookies","$http",function(e,t,n){e.title="个人中心",e.contentTitle="个人信息阅览",e.isEdit=!1,e.user={},e.requestParams={};var a="../WebData/USL_personalInfo.ashx?";function r(){o({NVC_NAME:"screamsyk",NVC_NATION:"汉族",NVC_BIRTHPLACE:"四川遂宁",NVC_EDUCATION:"本科",I_GRADE:2013,NVC_PROFESSION:"计算机科学与技术",VC_TELEPHONE:12231231231,VC_EMAIL:null,I_SEX:0});var e={action:"GetUserInfo"};t.get("userId")&&(e.userId=t.get("userId"),n.post(a+s.param(e)).then(function(e){var t=e.data;1==t.success?o(t.data):i("warning",t.msg)},function(e){i("error","网络出错")}))}function o(t){e.user.name=t.NVC_NAME,e.user.nation=t.NVC_NATION,e.user.birthplace=t.NVC_BIRTHPLACE,e.user.education=t.NVC_EDUCATION,e.user.grade=t.I_GRADE,e.user.profession=t.NVC_PROFESSION,e.user.telephone=t.VC_TELEPHONE,e.user.email=t.VC_EMAIL,e.user.sex=t.I_SEX}function i(e,t){swal({title:"",text:t,type:e,showCancelButton:!1,confirmButtonText:"确认"})}r(),e.$root.$broadcast("optionChange",{option:"personalInfo"}),e.startEdit=function(){e.isEdit=!0,e.contentTitle="个人信息编辑",null==e.user.telephone?e.requestParams.telephone="":e.requestParams.telephone=e.user.telephone,null==e.user.email?e.requestParams.email="":e.requestParams.email=e.user.email},e.cancelEdit=function(){e.isEdit=!1,e.contentTitle="个人信息阅览"},e.startSave=function(){0!=(""!=e.requestParams.telephone&&null==e.requestParams.telephone.match(/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/)?(layer.open({type:4,tips:[3,"#ff9911"],time:3e3,content:["手机号格式不正确","#telephoneId"],closeBtn:0,shade:0}),!1):null==e.requestParams.email?(layer.open({type:4,tips:[3,"#ff9911"],time:3e3,content:["邮箱格式不正确","#emailId"],closeBtn:0,shade:0}),!1):""!=e.requestParams.email&&null==e.requestParams.email.match(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/)?(layer.open({type:4,tips:[3,"#ff9911"],time:3e3,content:["邮箱格式不正确","#remindId"],closeBtn:0,shade:0}),!1):void 0)&&(e.requestParams.action="UpdateUserInfo",t.get("userId")&&(e.requestParams.userId=t.get("userId"),n.post(a+s.param(e.requestParams)).then(function(t){var n=t.data;1==n.success?(e.contentTitle="个人信息阅览",e.isEdit=!1,r(),i("success","保存成功")):i("warning",n.msg)},function(e){i("error","网络出错")})))}}]),t.filter("Sex",function(){return function(e){return 0===e?"男":"女"}})}.apply(t,a))||(e.exports=r)}).call(this,n(30))}}]);