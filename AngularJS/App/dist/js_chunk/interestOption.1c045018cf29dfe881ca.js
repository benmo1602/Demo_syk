(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{119:function(e,t,s){(function(n){var r,i;r=[s(13)],void 0===(i=function(e){e.module("app").controller("interestOptionController",["$scope","$cookies","$http",function(e,t,s){e.title="兴趣选项",e.interestThemes=[],e.userInterests=[];var r="../WebData/USL_interestOption.ashx?";function i(){s.post(r+n.param({action:"GetAllInterestTheme"})).then(function(t){var s=t.data;1==s.success?e.interestThemes=s.data:a("warning",s.msg)},function(e){a("error","网络出错")})}function o(){var i={action:"GetUserInterest"};t.get("userId")&&(i.userId=t.get("userId"),s.post(r+n.param(i)).then(function(t){var s=t.data;1==s.success?(e.userInterests=s.data,0==e.userInterests.length?e.$root.$broadcast("isSelect",{msg:"请选择您的兴趣选项并开启推送，便于系统推送您感兴趣的图书信息。",num:1}):e.$root.$broadcast("isSelect",{msg:"暂无相关提醒。",num:0})):a("warning",s.msg)},function(e){a("error","网络出错")}))}function a(e,t){swal({title:"",text:t,type:e,showCancelButton:!1,confirmButtonText:"确认"})}i(),o(),e.$root.$broadcast("optionChange",{option:"interestOption"}),e.isSelected=function(t){for(var s in e.userInterests)if(t.ID==e.userInterests[s].ID)return!0;return!1},e.dealSelected=function(e){e.isClick?e.isClick=!1:e.isClick=!0},e.dealNotSelected=function(e){e.isClick?e.isClick=!1:e.isClick=!0},e.saveUserInterest=function(){var c=[],u=[];for(var l in e.userInterests)e.userInterests[l].isClick&&c.push(e.userInterests[l].ID);for(var l in e.interestThemes)e.interestThemes[l].isClick&&u.push(e.interestThemes[l].ID);var p={action:"SaveUserInterest"};p.userInterestsDel=JSON.stringify(c),p.userInterestsAdd=JSON.stringify(u),t.get("userId")&&(p.userId=t.get("userId"),s.post(r+n.param(p)).then(function(e){var t=e.data;1==t.success?(i(),o(),a("success",t.msg)):a("warning",t.msg)},function(e){a("error","网络出错")}))}}])}.apply(t,r))||(e.exports=i)}).call(this,s(30))}}]);